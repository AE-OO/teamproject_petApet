<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragment/heade :: head(petApet)}">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<th:block th:replace="~{fragment/header :: header}"></th:block>

<!-- Search Start -->
<div class="container-fluid p-0">
    <div id="header-search" class="carousel slide">
        <div class="search-item active">
            <img class="w-100" src="img/carousel-0.jpg" alt="Image">
            <div class="search-caption">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <h1 class="display-1 text-white mb-5 animated slideInDown">Welcome petApet</h1>
                            <form class="d-flex">
                                <input class="form-control me-sm-2" type="text" placeholder="찾고싶은 상품을 검색해 보세요!">
                                <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Search End -->

<!-- Top Feature Start -->
<div class="container-fluid top-feature py-5 pt-lg-0">
    <div class="container py-5 pt-lg-0">
        <div class="row gx-0">
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.1s">
                <div class="bg-white shadow d-flex align-items-center h-100 px-5" style="min-height: 160px;">
                    <div class="d-flex">
                        <div class="flex-shrink-0 btn-lg-square rounded-circle bg-light">
                            <i class="fa fa-times text-primary"></i>
                        </div>
                        <div class="ps-3">
                            <h4>No Hidden Cost</h4>
                            <span>Clita erat ipsum lorem sit sed stet duo justo</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.3s">
                <div class="bg-white shadow d-flex align-items-center h-100 px-5" style="min-height: 160px;">
                    <div class="d-flex">
                        <div class="flex-shrink-0 btn-lg-square rounded-circle bg-light">
                            <i class="fa fa-users text-primary"></i>
                        </div>
                        <div class="ps-3">
                            <h4>Dedicated Team</h4>
                            <span>Clita erat ipsum lorem sit sed stet duo justo</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.5s">
                <div class="bg-white shadow d-flex align-items-center h-100 px-5" style="min-height: 160px;">
                    <div class="d-flex">
                        <div class="flex-shrink-0 btn-lg-square rounded-circle bg-light">
                            <i class="fa fa-phone text-primary"></i>
                        </div>
                        <div class="ps-3">
                            <h4>24/7 Available</h4>
                            <span>Clita erat ipsum lorem sit sed stet duo justo</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Top Feature End -->

<div
        id="kakao-talk-channel-chat-button"
        data-channel-public-id="_txnxixbxj"
        data-title="consult"
        data-size="small"
        data-color="mono"
        data-shape="pc"
        data-support-multiple-densities="true"
></div>

<!-- Projects Start -->
<div class="container-xxl py-5">
    <div class="container">
        <div class="text-center mx-auto wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
            <p class="fs-5 fw-bold text-primary">Product</p>
            <h1 class="display-5 mb-5">Best</h1>
        </div>
        <div class="row wow fadeInUp" data-wow-delay="0.3s">
            <div class="col-12 text-center">
                <ul class="list-inline rounded mb-5" id="portfolio-flters">
                    <li class="mx-2 active" onclick="sortProduct('productViewCount')">HOT</li>
                    <li class="mx-2" onclick="sortProduct('productId')">최근 등록상품</li>
                    <li class="mx-2" onclick="sortProduct('productSellCount')">판매순</li>
                    <li class="mx-2" onclick="sortProduct('review')">리뷰순</li>
                    <li class="mx-2" onclick="sortProduct('productRating')">별점순</li>
                    <li class="mx-2"><a th:href="|@{/product}|">상품목록으로→</a></li>
                </ul>
            </div>
        </div>
        <div class="row g-4" id="appendTarget">
            <div class="col-lg-3 col-md-6 portfolio-item first wow fadeInUp" data-wow-delay="0.1s">
                <div class="portfolio rounded">
                    <img class="" src="/product/images/e234fd85-0585-497a-a27a-4da3b5506929.png" width="300"
                         height="300" alt="">
                    <div class="portfolio-text" style="opacity: 1;">
                        <h1 class="text-start rounded ms-2">
                            <a style="text-decoration: none;" class="text-dark fs-5" href="/product/food/106/details">123</a>
                        </h1>
                        <div class="d-flex flex-row">
                            <div>
                                <fieldset class="p-1 col">
                                    <div class="d-flex flex-row" style="max-height: 1rem; margin-top: 0.1rem">
                                        <p class="star" value="0" id="star0">
                                            <a class="my_star" value="1">★</a>
                                            <a class="my_star" value="2">★</a>
                                            <a class="my_star" value="3">★</a>
                                            <a class="my_star" value="4">★</a>
                                            <a class="my_star" value="5">★</a>
                                        </p>
                                        <p>
                                        </p></div>
                                </fieldset>
                            </div>
                            <h6 class="align-self-center mt-2">(0)</h6>
                        </div>
                        <div class="d-flex flex-column">
                            <div class="col">
                                <h1 class="fs-6 text-end">123</h1>
                            </div>
                            <div class="d-flex flex-row">
                                <div class="d-flex flex-fill justify-content-sm-end btn-group-sm">
                                    <button type="button" class="btn bg-secondary me-1 addCart" value="106">장바구니
                                        <input type="hidden" class="quan" value="1"></button>
                                    <a class="btn bg-secondary me-1 addBuy" href="/direct/checkout/106">바로구매
                                        <input type="hidden" class="quan" value="1"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Projects End -->

<!-- About Start -->
<div class="container-xxl py-5">
    <div class="container">
        <div class="row g-5 align-items-end">
            <div class="col-lg-3 col-md-5 wow fadeInUp" data-wow-delay="0.1s">
                <img class="img-fluid rounded" data-wow-delay="0.1s" src="img/about.jpg">
            </div>
            <div class="col-lg-6 col-md-7 wow fadeInUp" data-wow-delay="0.3s">
                <h1 class="display-1 text-primary mb-0">25</h1>
                <p class="text-primary mb-4">Year of Experience</p>
                <h1 class="display-5 mb-4">We Make Your Home Like A Garden</h1>
                <p class="mb-4">Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et
                    eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                <a class="btn btn-primary py-3 px-4" href="">Explore More</a>
            </div>
            <div class="col-lg-3 col-md-12 wow fadeInUp" data-wow-delay="0.5s">
                <div class="row g-5">
                    <div class="col-12 col-sm-6 col-lg-12">
                        <div class="border-start ps-4">
                            <i class="fa fa-award fa-3x text-primary mb-3"></i>
                            <h4 class="mb-3">Award Winning</h4>
                            <span>Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna</span>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-lg-12">
                        <div class="border-start ps-4">
                            <i class="fa fa-users fa-3x text-primary mb-3"></i>
                            <h4 class="mb-3">Dedicated Team</h4>
                            <span>Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- About End -->

<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-dark btn-lg-square rounded-circle back-to-top"><i class="bi bi-arrow-up"></i></a>

<th:block th:replace="~{fragment/layout :: mainFooter}"></th:block>

<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="lib/wow/wow.min.js"></script>
<script src="lib/easing/easing.min.js"></script>
<script src="lib/waypoints/waypoints.min.js"></script>
<script src="lib/owlcarousel/owl.carousel.min.js"></script>
<script src="lib/counterup/counterup.min.js"></script>
<script src="lib/parallax/parallax.min.js"></script>
<script src="lib/isotope/isotope.pkgd.min.js"></script>
<script src="lib/lightbox/js/lightbox.min.js"></script>

<!-- Template Javascript -->
<script src="js/main.js"></script>

<script type="text/javascript" th:inline="javascript">
    window.kakaoAsyncInit = function () {
        Kakao.Channel.createChatButton({
            container: '#kakao-talk-channel-chat-button',
        });
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.src = 'https://t1.kakaocdn.net/kakao_js_sdk/2.0.0/kakao.channel.min.js';
        js.integrity = 'sha384-qN6njjEgLQzM0N/uuB26JXrlFnwdctF+owkJc/pTqUpi1Qrp9xAvRKYIkzH5XcJU';
        js.crossOrigin = 'anonymous';
        fjs.parentNode.insertBefore(js, fjs);
    })(document, 'script', 'kakao-js-sdk');

    $(document).ready(sortProduct('productViewCount'));

    async function sortProduct(sortType) {
        $('#appendTarget').empty();
        fetch('/product/sort?sortType=' + sortType, {
            method: 'GET',
        })
            .then(response => {
                return response.json();
            })
            .then(data => {
                $.each(data, function (idx) {
                    const productListHtml = `
                <div class="col-lg-3 col-md-6 portfolio-item first wow fadeInUp" data-wow-delay="0.1s">
                <div class="portfolio rounded">
                    <img class="" src="/product/images/${data[idx].productImg.storeFileName}" width="300" height="300" alt="">
                    <div class="portfolio-text" style="opacity: 1;">
                        <h1 class="text-start rounded ms-2">
                            <a style="text-decoration: none;" class="text-dark fs-5" href="/product/food/${data[idx].productId}/details">${data[idx].productName}</a>
                        </h1>
                        <div class="d-flex flex-row">
                            <div>
                                <fieldset class="p-1 col">
                                    <div class="d-flex flex-row" style="max-height: 1rem; margin-top: 0.1rem">
                                        <p class="star" value="${data[idx].productRating}" id="star0">
                                            <a class="my_star" value="1">★</a>
                                            <a class="my_star" value="2">★</a>
                                            <a class="my_star" value="3">★</a>
                                            <a class="my_star" value="4">★</a>
                                            <a class="my_star" value="5">★</a>
                                        </p><p>
                                    </p></div>
                                </fieldset>
                            </div>
                            <h6 class="align-self-center mt-2">(${data[idx].productReview})</h6>
                        </div>
                        <div class="d-flex flex-column">
                            <div class="col">
                                <h1 class="fs-6 text-end" id="priceToString${idx}"></h1>
                            </div>
                            <div class="d-flex flex-row">
                                <div class="d-flex flex-fill justify-content-sm-end btn-group-sm">
                                    <button type="button" class="btn bg-secondary me-1 addCart" value="${data[idx].productId}">장바구니
                                        <input type="hidden" class="quan" value="1"></button>
                                    <a class="btn bg-secondary me-1 addBuy" href="/direct/checkout/${data[idx].productId}">바로구매
                                        <input type="hidden" class="quan" value="1"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>`;
                    var size = $('p[class = star]').length;
                    for (var i = 0; i < size; i++) {
                        $('p[class = star]').eq(i).attr('id', "moreRating" + i);

                        $("#moreRating" + i).find(".my_star").filter(function (k, v) {
                            return $(v).attr("value") <= $("#moreRating" + i).attr('value') ? $(v).addClass("on") : $(v).removeClass("on");
                        });
                    }
                    $('#appendTarget').append(productListHtml);
                    $('#priceToString'+idx).text(priceToString(data[idx].productPrice)+'원')
                })
            });
    }
    function priceToString(price) {
        return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }

</script>
</body>

</html>