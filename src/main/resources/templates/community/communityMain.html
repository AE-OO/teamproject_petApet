<!DOCTYPE html>
<html lang="en">
<head th:replace="fragment/saron_base :: base(~{::title},~{::link},~{::script})">
    <title>petApet - 커뮤니티</title>
    <link>
    <script>
        selectPageNum = function (value) {
            goPost(value,$("#pageSize").text(),$("#categoryList").children('.active').text().toLowerCase())
        }

        selectSize = function (value){
            goPost($('.page-item.active').children().text(),value,$("#categoryList").children('.active').text().toLowerCase())
        }

        selectCategory =  function (value){
            $("#categoryList").children('.active').removeClass('active');
            $(this).parent().addClass('active')
            goPost($('.page-item.active').children().text(),$("#pageSize").text(),value)
        }

        goPost = function (value1,value2,value3) {
            // alert(value);
            let form = document.createElement('form');
            let pageNum;
            pageNum = document.createElement('input');
            pageNum.setAttribute('type', 'hidden');
            pageNum.setAttribute('name', 'pageNum');
            pageNum.setAttribute('value', value1);
            let pageSize;
            pageSize = document.createElement('input');
            pageSize.setAttribute('type', 'hidden');
            pageSize.setAttribute('name', 'pageSize');
            pageSize.setAttribute('value', value2);
            let category;
            category = document.createElement('input');
            category.setAttribute('type', 'hidden');
            category.setAttribute('name', 'communityCategory');
            category.setAttribute('value', value3);
            form.appendChild(pageNum);
            form.appendChild(pageSize);
            form.appendChild(category);
            form.setAttribute('method', 'post');
            form.setAttribute('action', '/community');
            document.body.appendChild(form);
            form.submit();
        }
        $(function() {
            $("#writeBtn").click(function () {
                window.location="/community/insert";
            })
        });

    </script>
</head>
<body>
<th:block th:replace="~{fragment/header :: header}"></th:block>
<!-- start feature1 -->
<hr class="mt-5">
<div class="container-xxl ">
    <div class="container py-5">
        <div class="text-center">
            <p class="fs-5 fw-bold text-primary">Pet A Pet</p>
            <h1 class="display-5 mb-3">Pet Community</h1>
            <div class="col-12 text-center">
                <ul id="categoryList" class="list-inline rounded mb-4 community-menu" >
<!--                    <li class="mx-2 active"><a href="#">인기글</a></li>-->
                    <li class="mx-2 active"><a  href="javascript:selectCategory('all')">All</a></li>
                    <li class="mx-2 "><a href="javascript:selectCategory('거래')">거래</a></li>
                    <li class="mx-2 "><a href="javascript:selectCategory('추천')">추천</a></li>
                    <li class="mx-2 "><a href="javascript:selectCategory('일상')">일상</a></li>
                </ul>
            </div>
            <!--            <div class="row">-->
            <div class="col-12">
                <div class="float-start">
                    <p class="pt-2 mb-0">새글 <strong th:text="${todayPosts}"/> / [[${community.getTotalElements()}]]</p>
                </div>
                <div class="dropdown">
                    <a class="btn btn-link dropdown-toggle float-end" href="#" role="button" data-bs-toggle="dropdown"
                       aria-expanded="false">
                        목록<span id="pageSize" th:text="${community.getSize()}"/>개
                    </a>
                    <ul class="dropdown-menu" style="min-width: auto;">
                        <li>
                            <a class="dropdown-item" href="javascript:selectSize(10)">목록 10개</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="javascript:selectSize(20)">목록 20개</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="javascript:selectSize(30)">목록 30개</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="javascript:selectSize(40)">목록 40개</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="javascript:selectSize(50)">목록 50개</a>
                        </li>
                    </ul>
                </div>

                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th class="col-md-1">번호</th>
                        <th>제목</th>
                        <th class="col-md-2">글쓴이</th>
                        <th class="col-md-2">작성일</th>
                        <th class="col-md-1">조회</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="community : ${community}">
                        <td th:text="${community.communityId}"/>
                        <td class="text-start">
                            <a th:href="'/community/'+${community.communityId}" class="mx-2">
                                <strong class="me-2 text-danger" th:text="${community.communityCategory}"/>
                                <strong class="me-2" th:text="${community.communitySubCategory}"/>
                                [[${community.communityTitle}]]
                            </a>
                            <span class="badge2" th:if="${community.commentListSize}>0"/>
                        </td>
                        <td th:text="${community.memberId}"/>
                        <td th:text="${community.communityDate}"/>
                        <td th:text="${community.viewCount}"/>
                    </tr>
                    <tr th:if="${community.getTotalElements()} == 0">
                        <td class="py-5" colspan="5"><strong>작성된 글이 없습니다</strong></td>
                    </tr>
                    </tbody>
                </table>
                <div class="mt-4">
                    <button id="writeBtn" class="btn btn-danger float-start">글쓰기</button>
                    <button class="btn btn-primary float-end">내글보기</button>

                    <div aria-label="Page navigation">
                        <ul id="pageNum" class="pagination justify-content-center">
                            <li th:class="${community.isFirst()}? 'page-item disabled':'page-item'">
                                <a class="page-link" th:href="|javascript:selectPageNum(${community.getNumber()})|"
                                   th:style="${community.hasPrevious()}? '':|pointer-events: none;|">
                                    <span aria-hidden="true"><i class="bi bi-chevron-left"></i></span>
                                </a>
                            </li>
                            <li th:each="page : ${#numbers.sequence(1,community.getTotalPages())}"
                                th:class="${community.getNumber()+1 == page}? 'page-item active':'page-item'">
                                <a class="page-link"th:href="|javascript:selectPageNum(${page})|" ><span>[[${page}]]</span></a>
                            </li>
                            <li th:if="${community.getTotalPages()}>5" class="disabled"><a>...</a></li>
                            <li th:if="${community.getTotalPages()}>5"><a href="#" th:text="${community.getTotalPages()}"></a></li>
                            <li th:class="${community.isLast()}? 'page-item disabled':'page-item'">
                                <a class="page-link" th:href="|javascript:selectPageNum(${community.getNumber()+2})|"
                                   th:style="${community.hasNext()}? '':|pointer-events: none;|">
                                    <span aria-hidden="true"><i class="bi bi-chevron-right"></i></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-2 mx-auto me-1 px-0">
                        <select class="form-control">
                            <option selected>제목+내용</option>
                            <option>글제목</option>
                            <option>글작성자</option>
                        </select>
                    </div>
                    <div class="col-3 mx-1 px-0">
                        <input type="text" class="form-control">
                    </div>
                    <div class="col-1 mx-auto ms-1 px-0">
                        <button class="btn btn-primary"><i class="fa fa-search m-0"></i></button>
                    </div>
                </div>
            </div>
        </div>
        <!--        </div>-->
    </div>
</div>
<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-dark btn-lg-square rounded-circle back-to-top"><i class="bi bi-arrow-up"></i></a>
<th:block th:replace="~{fragment/layout :: mainFooter}"></th:block>

</body>

</html>